webpackJsonp([1],{"+2mg":function(e,t){},"6yb0":function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=s("VU/8")({name:"App"},r,!1,function(e){s("o5yk")},null,null).exports,o=s("/ocq"),i=s("Xxa5"),d=s.n(i),c=s("exGp"),u=s.n(c),l=s("Dd8w"),m=s.n(l),p=s("+cKO"),f=s("NYxO"),v={data:function(){return{zipcode:"",number:null,complement:null}},computed:m()({},Object(f.c)("Address",["addressInfo"]),{isFormValid:function(){return!this.$v.$invalid},cleanZipcode:function(){return this.zipcode.replace(/[.-]/g,"")},zipcodeInputClass:function(){var e=this.$v;return!e.zipcode.$dirty||!e.zipcode.$invalid&&this.addressInfo.street?e.zipcode.$dirty?"is-valid":void 0:"is-invalid"}}),validations:{zipcode:{required:p.required,minLength:Object(p.minLength)(10)},number:{required:p.required}},methods:m()({},Object(f.b)("Address",["setAddressInfo","setAddress"]),{getAddressInfo:function(){this.$v.zipcode.$invalid||this.setAddressInfo({zipcode:this.cleanZipcode})},addAddress:function(){this.isFormValid&&(this.addressInfo.number=this.number,this.addressInfo.complement=this.complement?this.complement:"",this.clearForm(),this.setAddress(this.addressInfo))},clearForm:function(){this.zipcode="",this.street="",this.number="",this.complement="",this.$v.$reset()}})},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{staticClass:"address-form",on:{submit:function(t){return t.preventDefault(),e.addAddress(t)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"zipcode"}},[e._v("CEP:")]),e._v(" "),s("input",{directives:[{name:"mask",rawName:"v-mask",value:"##.###-###",expression:"'##.###-###'"},{name:"model",rawName:"v-model",value:e.zipcode,expression:"zipcode"}],staticClass:"form-control",class:e.zipcodeInputClass,attrs:{id:"zipcode",placeholder:"Digite o CEP",type:"text"},domProps:{value:e.zipcode},on:{keydown:function(t){e.$v.zipcode.$touch()},keyup:function(t){e.getAddressInfo()},input:function(t){t.target.composing||(e.zipcode=t.target.value)}}})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.$v.zipcode.$invalid&&e.addressInfo.street,expression:"!$v.zipcode.$invalid && addressInfo.street"}],staticClass:"address-complement"},[s("div",{staticClass:"infos-wrapper"},[s("p",{staticClass:"address"},[e._v(e._s(e.addressInfo.street)+",")]),e._v(" "),s("p",{staticClass:"neighborhood"},[e._v(e._s(e.addressInfo.neighborhood)+",")]),e._v(" "),s("p",{staticClass:"city"},[e._v(e._s(e.addressInfo.city)+" - "+e._s(e.addressInfo.state))])])]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"number"}},[e._v("Número:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.number,expression:"number"}],staticClass:"form-control",class:{"is-invalid":e.$v.number.$error,"is-valid":!e.$v.number.$error&&e.$v.number.$dirty},attrs:{id:"number",type:"text"},domProps:{value:e.number},on:{keydown:function(t){e.$v.number.$touch()},input:function(t){t.target.composing||(e.number=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"complement"}},[e._v("Complemento:")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.complement,expression:"complement"}],staticClass:"form-control",attrs:{id:"complement",type:"text"},domProps:{value:e.complement},on:{input:function(t){t.target.composing||(e.complement=t.target.value)}}})]),e._v(" "),s("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:!e.isFormValid}},[e._v("\n      Cadastrar\n    ")])])])},staticRenderFns:[]};var g,b=s("VU/8")(v,h,!1,function(e){s("s+Zg")},"data-v-2ac9c416",null).exports,_=s("mtWM"),w=s.n(_),I=this,C=function(e){return e*(Math.PI/180)},A=(g=u()(d.a.mark(function e(t){var s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s="https://locationiq.org/v1/search.php?key="+"9e1401d3feee8e"+"&q="+t+"&format=json",e.next=4,w.a.get(s);case 4:return e.abrupt("return",e.sent.data[0]);case 5:case"end":return e.stop()}},e,I)})),function(e){return g.apply(this,arguments)}),x={created:function(){this.calculeDistance(),this.getWeather()},updated:function(){this.calculeDistance()},data:function(){return{edit:!1,newInfos:{street:this.address.street,number:this.address.number,complement:this.address.complement,neighborhood:this.address.neighborhood,city:this.address.city},position:{latitude:this.address.latitude,longitude:this.address.longitude},distance:null}},computed:m()({},Object(f.c)("Address",["user"]),{formatedDistance:function(){var e=this.distance;return e?e.toFixed()+" km":""}}),props:["address","index"],methods:m()({},Object(f.b)("Address",["removeAddress","changeAddress","setWeather"]),{remove:function(){this.removeAddress(this.index)},change:function(){var e=this.address,t=this.newInfos;this.changeAddress({address:e,newInfos:t}),this.edit=!1},calculeDistance:function(){var e,t,s,n,r,a,o,i=this.user.location,d=this.address;this.distance=(e=d.latitude,t=d.longitude,s=i.latitude,n=i.longitude,r=C(s-e),a=C(n-t),o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(C(e))*Math.cos(C(s))*Math.sin(a/2)*Math.sin(a/2),2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371)},getWeather:function(){this.setWeather(this.position)}})},y={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"address-card"},[s("p",{staticClass:"street"},[e._v(e._s(e.address.street)+", "+e._s(e.address.number)+" "+e._s(e.address.complement))]),e._v(" "),s("p",{staticClass:"neighborhood"},[e._v(e._s(e.address.neighborhood))]),e._v(" "),s("p",{staticClass:"city"},[e._v(e._s(e.address.city)+" - "+e._s(e.address.state))]),e._v(" "),s("p",{staticClass:"distance"},[e._v("Aprox. "+e._s(e.formatedDistance)+" de distância")]),e._v(" "),s("div",{staticClass:"actions-wrapper"},[s("button",{staticClass:"btn btn-primary",on:{click:function(t){e.edit=!e.edit}}},[e._v("Alterar")]),e._v(" "),s("button",{staticClass:"btn btn-danger",on:{click:e.remove}},[e._v("Remover")])])]),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.edit?s("form",{staticClass:"form-edit",on:{submit:function(t){return t.preventDefault(),e.change(t)}}},[s("h4",[e._v("Alteração de endereço")]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"address"}},[e._v("Endereco")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newInfos.street,expression:"newInfos.street"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.newInfos.street},on:{input:function(t){t.target.composing||e.$set(e.newInfos,"street",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"address"}},[e._v("Número")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newInfos.number,expression:"newInfos.number"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.newInfos.number},on:{input:function(t){t.target.composing||e.$set(e.newInfos,"number",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"address"}},[e._v("Complemento")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newInfos.complement,expression:"newInfos.complement"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.newInfos.complement},on:{input:function(t){t.target.composing||e.$set(e.newInfos,"complement",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"address"}},[e._v("Bairro")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newInfos.neighborhood,expression:"newInfos.neighborhood"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.newInfos.neighborhood},on:{input:function(t){t.target.composing||e.$set(e.newInfos,"neighborhood",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"address"}},[e._v("Cidade")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newInfos.city,expression:"newInfos.city"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.newInfos.city},on:{input:function(t){t.target.composing||e.$set(e.newInfos,"city",t.target.value)}}})]),e._v(" "),s("button",{staticClass:"btn btn-primary btn-block"},[e._v("Enviar")])]):e._e()])],1)},staticRenderFns:[]};var $={components:{AddressCard:s("VU/8")(x,y,!1,function(e){s("q1bt")},"data-v-255f3090",null).exports},computed:m()({},Object(f.c)("Address",["addressList"]))},E={render:function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"address-list"},[t("transition-group",{attrs:{name:"fade"}},this._l(this.addressList,function(e,s){return t("li",{key:s,staticClass:"item"},[t("address-card",{attrs:{address:e,index:s}})],1)}))],1)},staticRenderFns:[]};var S=s("VU/8")($,E,!1,function(e){s("+2mg")},"data-v-27ce9a9c",null).exports,D=s("//Fk"),k=s.n(D),z=function(){if(navigator.geolocation)return new k.a(function(e,t){navigator.geolocation.getCurrentPosition(e,t)})},N={mounted:function(){this.loadPosition()},components:{AddressForm:b,AddressList:S},methods:m()({},Object(f.b)("Address",["setUserLocation"]),{loadPosition:function(){var e=this;return u()(d.a.mark(function t(){var s,n,r,a,o;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z();case 2:s=t.sent,n=s.coords,r=n.latitude,a=n.longitude,o={latitude:r,longitude:a},e.setUserLocation(o);case 6:case"end":return t.stop()}},t,e)}))()}})},O={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"address"},[t("h1",{staticClass:"title"},[this._v("Address Register")]),this._v(" "),t("div",{staticClass:"content"},[t("address-form"),this._v(" "),t("address-list")],1)])},staticRenderFns:[]};var R=s("VU/8")(N,O,!1,function(e){s("6yb0")},"data-v-4a90e7b6",null).exports;n.a.use(o.a);var P,F,M,L,j=new o.a({routes:[{path:"/",name:"Address",component:R}]}),q=this,U=function(){var e=u()(d.a.mark(function e(t,s){var n,r,a,o=t.commit;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.zipcode,r="https://viacep.com.br/ws/"+n+"/json/",e.next=4,w.a.get(r);case 4:a=e.sent.data,o("SET_ADDRESS_INFO",{addressInfo:a});case 6:case"end":return e.stop()}},e,q)}));return function(t,s){return e.apply(this,arguments)}}(),V=(P=u()(d.a.mark(function e(t,s){var n=t.commit;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(s);case 2:n("SET_ADDRESS",s);case 3:case"end":return e.stop()}},e,q)})),function(e,t){return P.apply(this,arguments)}),T=(F=u()(d.a.mark(function e(t,s){var n,r=t.commit;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.newInfos,e.next=3,W(n);case 3:r("CHANGE_ADDRESS",s);case 4:case"end":return e.stop()}},e,q)})),function(e,t){return F.apply(this,arguments)}),W=(M=u()(d.a.mark(function e(t){var s,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.street+" "+t.number+" "+t.city,e.next=3,A(s);case 3:n=e.sent,t.latitude=n.lat,t.longitude=n.lon;case 6:case"end":return e.stop()}},e,q)})),function(e){return M.apply(this,arguments)}),H={namespaced:!0,state:{addressInfo:{},addressList:[],user:{}},actions:{setAddressInfo:U,setAddress:V,removeAddress:function(e,t){var s=e.commit;t>-1&&s("REMOVE_ADDRESS",t)},changeAddress:T,setUserLocation:function(e,t){(0,e.commit)("SET_USER_LOCATION",t)},setWeather:(L=u()(d.a.mark(function e(t,s){var n,r,a;t.commit;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="6fa0ae0ea5cef215d411b2adc5db0af2",r="http://api.openweathermap.org/data/2.5/weather?lat="+s.latitude+"&"+s.longitude+"=139&APPID="+n,e.next=4,w.a.get(r);case 4:a=e.sent,console.log(a);case 6:case"end":return e.stop()}},e,q)})),function(e,t){return L.apply(this,arguments)})},mutations:{SET_ADDRESS_INFO:function(e,t){e.addressInfo=t.addressInfo,e.addressInfo={street:t.addressInfo.logradouro,neighborhood:t.addressInfo.bairro,city:t.addressInfo.localidade,state:t.addressInfo.uf}},SET_ADDRESS:function(e,t){var s=t;e.addressList.push(s)},REMOVE_ADDRESS:function(e,t){e.addressList.splice(t,1)},CHANGE_ADDRESS:function(e,t){t.address.street=t.newInfos.street,t.address.neighborhood=t.newInfos.neighborhood,t.address.number=t.newInfos.number,t.address.complement=t.newInfos.complement,t.address.city=t.newInfos.city,t.address.latitude=t.newInfos.latitude,t.address.longitude=t.newInfos.longitude},SET_USER_LOCATION:function(e,t){e.user.location={latitude:t.latitude,longitude:t.longitude}}},getters:{}},Z=s("424j");n.a.use(f.a);var G={Address:H},B=new f.a.Store({modules:G,plugins:[Object(Z.a)()]}),J=s("ESwS"),K=s.n(J),X=s("1I9z");n.a.use(K.a),n.a.use(X.a),n.a.config.productionTip=!1,new n.a({el:"#app",router:j,store:B,components:{App:a},template:"<App/>"})},o5yk:function(e,t){},q1bt:function(e,t){},"s+Zg":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.fb92506205fcc4aa24de.js.map